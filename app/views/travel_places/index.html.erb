<% if user_signed_in? %>
  <div class="links">
    <%= button_to 'Logout', destroy_user_session_path, method: :delete, class: 'btn btn-warning' %>
    <%= link_to 'Favorites', favorites_user_path(current_user) %>
  </div>
<% end %>

<h1>List of travel places</h1>

<% if user_signed_in? && current_user.agent? %>
  <%= link_to 'Add new place', new_travel_place_path %>
<% end %>
<div class="places">
  <% if @travel_places.present? %>
    <% @travel_places.each do |travel_place| %>
      <div class="travel-place card w-25">
        <div class="card-header">
          <h5 class="card-title"><%= travel_place.name %></h5>
          <% if user_signed_in? && current_user.agent? %>
              <%= link_to 'Edit', edit_travel_place_path(travel_place) %>
          <% end %>
        </div>
        <div class="card-body">
          
          <p><strong>Location:</strong> <%= travel_place.location %></p>
          <p><strong>Description:</strong> <%= travel_place.description %></p>
          <p><strong>Creator:</strong> <%= "#{travel_place.creator.last_name} #{travel_place.creator.first_name}" %></p>
          <p><strong>Created at:</strong> <%= travel_place.created_at %></p>
          <p><strong>Updated_at:</strong> <%= travel_place.updated_at %></p>
        
          
        </div>
        <div class="card-footer">
          <% if user_signed_in? 
              if current_user.agent? %>
                <%= button_to 'Delete', travel_place, method: :delete, class: 'btn btn-danger' %>
              <% end %>
              <% if current_user.favorite_place?(travel_place) %>
                <%= button_to 'Remove from favorites', add_to_favorites_travel_place_path(travel_place), method: :post, class: 'btn btn-warning' %>
              <% else %>
                <%= button_to 'Add to favorites', add_to_favorites_travel_place_path(travel_place), method: :post, class: 'btn btn-primary' %>
              <% end %>
          <% end %>
        </div>
      </div>
  <% end %>
  <% else %>
    <p>No places yet.</p>
  <% end %>
 </div>
